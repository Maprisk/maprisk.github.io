<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Random US Dot Map | JS Insights</title>

    <!-- Calcite Components -->
    <script type="module" src="https://js.arcgis.com/calcite-components/3.3.3/calcite.esm.js"></script>

    <!-- ArcGIS Maps SDK -->
    <script src="https://js.arcgis.com/4.34/"></script>

    <style>
      html, body { height: 100%; margin: 0; }
      arcgis-map { width: 100%; height: 100%; }
    </style>
  </head>

  <body class="calcite-mode-dark">
    <arcgis-map>
      <arcgis-zoom slot="top-left"></arcgis-zoom>
      <arcgis-expand slot="top-left" group="top-left">
        <arcgis-legend></arcgis-legend>
      </arcgis-expand>
    </arcgis-map>

    <script type="module">
      const [FeatureLayer, DotDensityRenderer, Graphic, GraphicsLayer, SimpleRenderer, Point] = await $arcgis.import([
        "@arcgis/core/layers/FeatureLayer.js",
        "@arcgis/core/renderers/DotDensityRenderer.js",
        "@arcgis/core/Graphic.js",
        "@arcgis/core/layers/GraphicsLayer.js",
        "@arcgis/core/renderers/SimpleRenderer.js",
        "@arcgis/core/geometry/Point.js"
      ]);

      const viewElement = document.querySelector("arcgis-map");
      await viewElement.viewOnReady();

      // ðŸ”¹ Random points generator
      const POINT_COUNT = 2000; // You can increase
      const graphics = [];

      for (let i = 0; i < POINT_COUNT; i++) {
        const lon = -125 + Math.random() * 58; // Rough US bounds
        const lat = 25 + Math.random() * 24;   // Rough US bounds

        const g = new Graphic({
          geometry: new Point({ longitude: lon, latitude: lat }),
          attributes: {
            category: ["Red","Blue","Green","Yellow"][Math.floor(Math.random()*4)]
          }
        });
        graphics.push(g);
      }

      const graphicsLayer = new GraphicsLayer({
        title: "Random US Locations",
        graphics: graphics
      });

      // ðŸ”¹ Simple renderer using dot density style
      const renderer = new SimpleRenderer({
        symbol: {
          type: "simple-marker",
          style: "circle",
          size: 6,
          color: [255, 50, 50, 0.7] // semi-transparent red
        }
      });
      graphicsLayer.renderer = renderer;

      viewElement.map.add(graphicsLayer);
    </script>
  </body>
</html>
